<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome.min.css" rel="stylesheet">
    <title>rabbit's task</title>
</head>
<body>

<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <ul class="nav nav-tabs" style="margin-bottom: 30px; margin-top: 30px;">
                <li>
                     <a href="index.html">task</a>
                </li>
                <li class="active">
                     <a href="determination.html">determination</a>
                </li>
                <li class="disabled">
                     <a href="#">private messages</a>
                </li>
            </ul>
        
            <div class="panel-group" id="panel-299448">
             
            </div>
        </div>
    </div>
</div>

</body>

</html>
<script src="history.js"></script>
<script>

function panelString(id, chat) {
    console.log(chat);
    var title = "untitled";
    for(var i = 0; i < chat.length; i++)
        if(chat[i].indexOf("t:") !== -1) title = chat[i].substring(3);
    var ret = "";
    for(var i = 0; i < chat.length; i++) {
        if(chat[i].indexOf("t:") !== -1) title = chat[i].substring(3);
        else if(chat[i].indexOf("r:") !== -1){
            ret += "<h4 class='text-info'>" + chat[i].substring(3) + "</h4>";
        } else if(chat[i].indexOf("n:") !== -1){
            ret += "<h4 class='text-danger'>" + chat[i].substring(3) + "</h4>";
        }
    }
    title = title.trim();
    var graph;
    if(title === 'untitled') graph = 'book';
    else {
        if(title[0] === '(') {
            var e = title.indexOf(')');
            graph = title.substring(1, e).trim();
            title = title.substring(e + 1).trim();
        } else graph = 'book';
    }
    return '<div class="panel panel-default"> \
                <div class="panel-heading"> \
                     <a class="panel-title" data-toggle="collapse" data-parent="#panel-299448" href="#panel-element-'+id+'"><i class="fa fa-'+graph+'"></i>&nbsp;'+title+'</a> \
                </div> \
                <div id="panel-element-'+id+'" class="panel-collapse collapse in"> \
                    <div class="panel-body"> \
                       '+ret+' \
                    </div> \
                </div> \
            </div>';
}

$(document).ready(function() {
    var panel = $("#panel-299448");
    for(var i = 0; i < chatting.length; i++) {
        var p = $(panelString(i, chatting[i]));
        panel.append(p);
    }
    panel.find("a.panel-title").click();
    
});

</script>